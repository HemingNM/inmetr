---
title: "inmetr"
output: md_document
---


```{r, include=FALSE}
rm(list=ls())
knitr::opts_chunk$set(echo = TRUE)
```

## Overview

`inmetr` provide access to historical data measured by meteorological stations available in the Meteorological Database for Education and Research ([BDMEP](http://www.inmet.gov.br/projetos/rede/pesquisa/)) from  National Institute of Meteorology (Instituto Nacional de Meteorologia - [INMET](http://www.inmet.gov.br)), Brazil.



## Instalation

Installation of `inmetr` from GitHub is easy using the `devtools` package.

```{r, comment="", eval = FALSE, message=FALSE, error=FALSE}
library(devtools)
install_github('jdtatsch/inmetr')
```

```{r, comment="", message=FALSE}
library(inmetr)
```

## Stations ID

To search for meteorological station from INMET we can use the `bdmep_stations()`.

```{r, comment=""}
info <- bdmep_stations()
```

```{r, comment="", eval=FALSE}
head(info)
```

```{r, comment="", echo=FALSE}
pander::pandoc.table(head(info))
```



This function will return a data frame with station names, the brazilian state and OMM code. OMM code is necessary to download data from a meteorological station with `import_data()`.

Here we want to know the [OMM code](http://www.wmo.int/pages/prog/www/ois/volume-a/StationIDs_Global_1509.pdf) for the meterological station at Santa Maria in Rio Grande do Sul state.

```{r, comment=""}
code <- subset(info, name == "SANTA MARIA")
code <- subset(code, select = id)[[1]]
code
```

## Import data

Now we can get the data for Santa Maria city, from 1961 to the current day.

```{r, eval=FALSE, comment=""}
start_date <- "01/01/1961"
end_date <- format(Sys.Date(), "%d/%m/%Y")
sm <- import_bdmep(id = code,
                   sdate = start_date, 
                   edate = end_date, 
                   email = "your-email",
                   passwd = "your-password")
```


```{r, eval=TRUE, echo=FALSE, comment=""}
start_date <- "01/01/1961"
end_date <- format(Sys.Date(), "%d/%m/%Y")
sm <- import_bdmep(id = code, 
                   sdate = start_date, 
                   edate = end_date,                   
                   email = "jdtatsch@gmail.com",
                   passwd = "d17ulev5")
```

```{r, eval=FALSE, echo=TRUE, comment=""}
# check de start date
head(sm)
```

```{r, eval=TRUE, echo=FALSE, comment=""}
pander::pandoc.table(head(sm))
```

```{r, eval=FALSE, echo=TRUE, comment=""}
# check de end date
tail(sm)
```

```{r, eval=TRUE, echo=FALSE, comment=""}
pander::pandoc.table(tail(sm))
```


A description about the meteorological variables can be obtained with `data_description()`.

```{r, eval=TRUE, echo=TRUE, comment=""}
(met_vars <- data_description())
```